!function(r){var t={};function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:n})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,t){if(1&t&&(r=e(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var o in r)e.d(n,o,function(t){return r[t]}.bind(null,o));return n},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=8)}([function(r,t,e){var n,o,i=this&&this.__extends||(o=function(r,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)},function(r,t){function e(){this.constructor=r}o(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});void 0===(n=function(r,t){"use strict";t.__esModule=!0,t.VkOAuth2Service=t.VkAuthorizeError=t.VkAccessToken=t.VkOAuth2RedirectParamsError=t.VkOAuth2RedirectParamsSuccess=void 0;!function(){function r(){}r.fromStorage=function(r){return null},r.remove=function(r){},r.prototype.store=function(r){}}();var e=function(){function r(){}return r.build=function(r){return function(){function t(){}return t.fromStorage=function(t){var e=t.getItem(r);if(null===e)return null;try{return JSON.parse(e)}catch(r){return null}},t.remove=function(t){t.removeItem(r)},t.prototype.store=function(t){t.setItem(r,JSON.stringify(this))},t}()},r}(),n=function(r){function t(t,e,n,o){var i=r.call(this)||this;return i.accessToken=t,i.expiresIn=e,i.userId=n,i.state=o,i}return i(t,r),t.fromURLSearchParams=function(r){var e=r.get("access_token");if(null===e)return null;var n=r.get("expires_in");if(null===n)return null;var o=r.get("user_id");if(null===o)return null;var i=r.get("state");return new t(e,n,o,null!==i?i:void 0)},t.fromStorage=function(e){var n=r.fromStorage.call(this,e);return null===n||"string"!=typeof n.accessToken||"string"!=typeof n.expiresIn||"string"!=typeof n.userId||"string"!=typeof n.state&&void 0!==n.state?null:new t(n.accessToken,n.expiresIn,n.userId,n.state)},t}(e.build("VkOAuth2RedirectParamsSuccess"));t.VkOAuth2RedirectParamsSuccess=n;var o=function(r){function t(t,e){var n=r.call(this)||this;return n.error=t,n.errorDescription=e,n}return i(t,r),t.fromURLSearchParams=function(r){var e=r.get("error");if(null===e)return null;var n=r.get("error_description");return null===n?null:new t(e,n)},t.fromStorage=function(e){var n=r.fromStorage.call(this,e);return null===n?null:"string"==typeof n.error&&"string"==typeof n.errorDescription?new t(n.error,n.errorDescription):null},t}(e.build("VkOAuth2RedirectParamsError"));t.VkOAuth2RedirectParamsError=o;var u=function(r){function t(t,e,n){var o=r.call(this)||this;return o.token=t,o.tokenExpires=e,o.userId=n,o}return i(t,r),t.fromStorage=function(e){var n=r.fromStorage.call(this,e);return null===n?null:"string"==typeof n.token&&"string"==typeof n.tokenExpires&&"string"==typeof n.userId?new t(n.token,n.tokenExpires,n.userId):null},t.prototype.isValid=function(){return(new Date).getTime()<this.tokenExpires},t}(e.build("VkAccessToken"));t.VkAccessToken=u;var a=function(r){function t(t,e){var n=r.call(this)||this;return n.error=t,n.errorDescription=e,n}return i(t,r),t.fromStorage=function(e){var n=r.fromStorage.call(this,e);return null===n?null:"string"==typeof n.error&&"string"==typeof n.errorDescription?new t(n.error,n.errorDescription):null},t}(e.build("VkAuthorizeError"));t.VkAuthorizeError=a;var c=function(){function r(){}return r.findToken=function(r,t){var e=u.fromStorage(r);if(null!==e)return e;var o=n.fromStorage(t);if(null===o)return null;if(void 0!==o.state){var i=parseInt(o.state);if(!Number.isNaN(i)){var a=i+1e3*parseInt(o.expiresIn);e=new u(o.accessToken,a,o.userId)}}return e},r.findAuthorizeError=function(r,t){var e=a.fromStorage(r);if(null!==e)return e;var n=o.fromStorage(t);return null===n?null:e=new a(n.error,n.errorDescription)},r.buildAuthorizeUrl=function(t,e,n,o,i,u,a){var c=r.URL;return c+="?client_id="+t,c+="&redirect_uri="+e,null!=n&&(c+="&display="+n),null!=o&&(c+="&scope="+o),null!=i&&(c+="&response_type="+i),null!=u&&(c+="&state="+u),null!=a&&(c+="&revoke="+a),c},r.authorize=function(t,e,n,o,i){var u=r.buildAuthorizeUrl(t,e,n,o,"token",(new Date).getTime().toString(),i);location.replace(u)},r.URL="https://oauth.vk.com/authorize",r}();t.VkOAuth2Service=c}.apply(t,[e,t]))||(r.exports=n)},function(r,t,e){var n,o,i=this&&this.__extends||(o=function(r,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)},function(r,t){function e(){this.constructor=r}o(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});void 0===(n=function(r,t){"use strict";t.__esModule=!0,t.StorageProvider=t.StorageNotAvailableError=void 0;var e=function(r){function t(){var e=r.call(this)||this;return Object.setPrototypeOf(e,t.prototype),e.name="StorageNotAvailableError",e}return i(t,r),t}(Error);t.StorageNotAvailableError=e;var n=function(){function r(){var t=r.isStorageAvailable(window.sessionStorage)?window.sessionStorage:null,n=r.isStorageAvailable(window.localStorage)?window.localStorage:null;if(null===n&&null===t)throw new e;this.tokenStorage=null!==n?n:t,this.vkOAuth2ErrorStorage=null!==t?t:n,this.vkOAuth2RedirectParamsStorage=null!==t?t:n}return r.isStorageAvailable=function(r){var t=Math.random().toString();if(!(r instanceof Storage))return!1;try{return r.setItem(t,t),r.removeItem(t),!0}catch(r){return!1}},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.getTokenStorage=function(){return this.tokenStorage},r.prototype.getVkOAuth2ErrorStorage=function(){return this.vkOAuth2ErrorStorage},r.prototype.getVkOAuth2RedirectParamsStorage=function(){return this.vkOAuth2RedirectParamsStorage},r}();t.StorageProvider=n}.apply(t,[e,t]))||(r.exports=n)},,,,,,,function(r,t,e){r.exports=e(9)},function(r,t,e){var n,o;n=[e,t,e(0),e(1)],void 0===(o=function(r,t,e,n){"use strict";t.__esModule=!0;try{var o=n.StorageProvider.getInstance();if("oauth.vk.com"===new URL(document.referrer).hostname){var i=new window.URLSearchParams(location.hash.slice(1)),u=e.VkOAuth2RedirectParamsSuccess.fromURLSearchParams(i),a=o.getVkOAuth2RedirectParamsStorage();if(null!==u)u.store(a);else{var c=e.VkOAuth2RedirectParamsError.fromURLSearchParams(i);null!==c&&c.store(a)}}}catch(r){}finally{var l=location.origin.concat(location.pathname.split("/",2).join("/"));location.replace(l)}}.apply(t,n))||(r.exports=o)}]);